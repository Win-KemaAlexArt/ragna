<div class="chat-message message message-{{ message.role }} d-flex gap-3 mb-4 align-items-start"
     {%- if id is not none %}id="{{ id }}"{%- endif %}
     {%- if message.replace_event_id is not none %}
     sse-swap="{{ message.replace_event_id }}"
     hx-swap="outerHTML"
     {%- endif %}>
    <img src="{{ message.avatar }}"
         alt="{{ message.role }} avatar"
         class="avatar rounded-circle">
    <div class="message-content border p-3 rounded-3">
        <p class="mb-0"
           {%- if message.stream_event_id is not none %}
           sse-swap="{{ message.stream_event_id }}"
           hx-swap="beforeend"
           {%- endif %}>{{ message.content }}</p>
        {% if message.interaction_enabled %}
            <div class="d-flex align-items-center gap-3 mt-3 pt-3">
                <button type="button"
                        class="btn btn-ghost btn-copy"
                        data-bs-toggle="tooltip"
                        data-bs-placement="top"
                        data-bs-title="Copy to clipboard">
                    <i class="bi bi-clipboard"></i>
                    <span class="ms-1">Copy</span>
                </button>
                <button type="button"
                        class="btn btn-ghost"
                        data-bs-toggle="tooltip"
                        data-bs-placement="top"
                        data-bs-title="View sources for this response">
                    <i class="bi bi-info-circle"></i>
                    <span class="ms-1">Source info</span>
                </button>
            </div>
        {% endif %}
    </div>
</div>
